<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é¦¬ä¾†è¥¿äºæ—…éŠè¡Œç¨‹</title>

  <style>
    body {
      background: #f6f5f3;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .app {
      width: 380px;
      background: #fff;
      border-radius: 20px;
      padding: 20px;
    }
    .days {
      display: flex;
      overflow-x: auto;
      gap: 6px;
      margin-bottom: 12px;
    }
    .day-btn {
      padding: 6px 10px;
      border-radius: 12px;
      border: none;
      background: #eee;
      cursor: pointer;
    }
    .day-btn.active {
      background: #e5d5c3;
    }
    .tabs {
      display: flex;
      gap: 8px;
      margin: 10px 0;
    }
    .tab {
      flex: 1;
      padding: 8px;
      border-radius: 20px;
      border: none;
      background: #eee;
      cursor: pointer;
    }
    .tab.active {
      background: #e8dcca;
    }
    .card {
      background: #faf9f7;
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
    }
    .add-btn {
      width: 100%;
      margin: 12px 0;
      padding: 10px;
      border-radius: 12px;
      border: none;
      background: #d9cbb6;
      cursor: pointer;
    }
  </style>
</head>

<body>
<div class="app">
  <div class="days" id="dayButtons"></div>
  <h1 id="dayTitle"></h1>

  <div class="tabs">
    <button class="tab active" data-category="spot">æ™¯é»</button>
    <button class="tab" data-category="food">ç¾é£Ÿ</button>
    <button class="tab" data-category="stay">ä½å®¿</button>
  </div>

  <div id="schedule"></div>
  <button class="add-btn" onclick="addPlace()">ï¼‹ æ–°å¢åœ°é»</button>
</div>

<!-- ğŸ”¥ Firebase + JSï¼ˆä¸€å®šè¦æ˜¯ moduleï¼‰ -->
<script type="module">
  /* =====================
     Firebase åˆå§‹åŒ–
  ====================== */
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBOTh16RSCCca_FBUFiz0utDil-SlkZJKg",
    authDomain: "travel-plan-544b5.firebaseapp.com",
    projectId: "travel-plan-544b5",
    storageBucket: "travel-plan-544b5.firebasestorage.app",
    messagingSenderId: "794197854377",
    appId: "1:794197854377:web:5ac7eb18afb56618cf01b8"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  console.log("âœ… Firebase åˆå§‹åŒ–æˆåŠŸ", db);

  /* =====================
     è¡Œç¨‹ App æœ¬é«”
  ====================== */
  const days = [
    { date: "2/9", city: "å°ç£å‡ºç™¼" },
    { date: "2/10", city: "éº»å…­ç”²" },
    { date: "2/11", city: "æ³¢å¾·ç”³" },
    { date: "2/12", city: "æ³¢å¾·ç”³" },
    { date: "2/13", city: "KL" },
    { date: "2/14", city: "KL" },
    { date: "2/15", city: "æ¢³é‚¦" },
    { date: "2/16", city: "å›å°ç£" }
  ];

  let currentDay = 0;
  let currentCategory = "spot";

  const data = days.map(() => ({
    spot: [],
    food: [],
    stay: []
  }));

  function init() {
    const dayButtons = document.getElementById("dayButtons");
    dayButtons.innerHTML = "";

    days.forEach((d, i) => {
      const btn = document.createElement("button");
      btn.className = "day-btn" + (i === 0 ? " active" : "");
      btn.innerText = `Day ${i + 1}`;
      btn.onclick = () => switchDay(i);
      dayButtons.appendChild(btn);
    });

    document.querySelectorAll(".tab").forEach(tab => {
      tab.onclick = () => {
        document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
        tab.classList.add("active");
        currentCategory = tab.dataset.category;
        render();
      };
    });

    render();
  }

  function switchDay(index) {
    currentDay = index;
    document.querySelectorAll(".day-btn").forEach((b, i) =>
      b.classList.toggle("active", i === index)
    );
    render();
  }

  function render() {
    document.getElementById("dayTitle").innerText =
      `${days[currentDay].city} Â· ${days[currentDay].date}`;

    const list = document.getElementById("schedule");
    list.innerHTML = "";

    data[currentDay][currentCategory].forEach(item => {
      list.innerHTML += `
        <div class="card">
          <div>${item.time || ""}</div>
          <strong>${item.name}</strong>
          <div>${item.note || ""}</div>
        </div>
      `;
    });
  }

  window.addPlace = function () {
    const time = prompt("æ™‚é–“");
    const name = prompt("åœ°é»åç¨±");
    const note = prompt("å‚™è¨»");
    if (name) {
      data[currentDay][currentCategory].push({ time, name, note });
      render();
    }
  };

  init();
</script>
</body>
</html>
