<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>馬來西亞旅遊行程</title>

  

  <style>
    body {
      background: #f6f5f3;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .app {
      width: 380px;
      background: #fff;
      border-radius: 20px;
      padding: 20px;
    }
    .days {
      display: flex;
      overflow-x: auto;
      gap: 6px;
      margin-bottom: 12px;
    }
    .day-btn {
      padding: 6px 10px;
      border-radius: 12px;
      border: none;
      background: #eee;
      cursor: pointer;
    }
    .day-btn.active {
      background: #e5d5c3;
    }
    .tabs {
      display: flex;
      gap: 8px;
      margin: 10px 0;
    }
    .tab {
      flex: 1;
      padding: 8px;
      border-radius: 20px;
      border: none;
      background: #eee;
      cursor: pointer;
    }
    .tab.active {
      background: #e8dcca;
    }
    .card {
      background: #faf9f7;
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 10px;
    }
    .add-btn {
      width: 100%;
      margin: 12px 0;
      padding: 10px;
      border-radius: 12px;
      border: none;
      background: #d9cbb6;
      cursor: pointer;
    }
  </style>
</head>

<body>
<div class="app">
  <div class="days" id="dayButtons"></div>
  <h1 id="dayTitle"></h1>

  <div class="tabs">
    <button class="tab active" data-category="spot">景點</button>
    <button class="tab" data-category="food">美食</button>
    <button class="tab" data-category="stay">住宿</button>
  </div>

  <div id="schedule"></div>
  <button class="add-btn" onclick="addPlace()">＋ 新增地點</button>

  <hr>

<h2>待辦事項</h2>
<ul id="todoList"></ul>
<button class="add-btn" onclick="addTodo()">＋ 新增待辦</button>

<h2>行李清單</h2>
<ul id="luggageList"></ul>
<button class="add-btn" onclick="addLuggage()">＋ 新增行李</button>

<h2>購物清單</h2>
<ul id="shoppingList"></ul>
<button class="add-btn" onclick="addShopping()">＋ 新增購物</button>

</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBOTh16RSCCca_FBUFiz0utDil-SlkZJKg",
    authDomain: "travel-plan-544b5.firebaseapp.com",
    projectId: "travel-plan-544b5",
    storageBucket: "travel-plan-544b5.firebasestorage.app",
    messagingSenderId: "794197854377",
    appId: "1:794197854377:web:5ac7eb18afb56618cf01b8"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  console.log("✅ Firebase 初始化成功", db);

  // ===================== 行程資料 ======================
  const days = [
    { date: "2/9", city: "台灣出發" },
    { date: "2/10", city: "麻六甲" },
    { date: "2/11", city: "波德申" },
    { date: "2/12", city: "波德申" },
    { date: "2/13", city: "KL" },
    { date: "2/14", city: "KL" },
    { date: "2/15", city: "梳邦" },
    { date: "2/16", city: "回台灣" }
  ];

  let currentDay = 0;
  let currentCategory = "spot";

  // 每一天自己的行程 + 待辦
  const data = days.map(() => ({
    spot: [],
    food: [],
    stay: [],
    todo: []
  }));

  // 全旅程共用
  const luggage = [];
  const shopping = [];

  // ====== 工具函數 ======
  function renderSimpleList(id, arr) {
    const ul = document.getElementById(id);
    ul.innerHTML = "";
    arr.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item;
      ul.appendChild(li);
    });
  }

  // ====== Day 按鈕 ======
  function renderDayButtons() {
    const container = document.getElementById("dayButtons");
    container.innerHTML = "";
    days.forEach((day, index) => {
      const btn = document.createElement("button");
      btn.className = "day-btn";
      if (index === currentDay) btn.classList.add("active");
      btn.textContent = `Day ${index + 1}`;
      btn.onclick = () => {
        currentDay = index;
        updateActiveDay();
        renderSchedule();
        renderTodo();
        renderScheduleItems();
      };
      container.appendChild(btn);
    });
  }

  function updateActiveDay() {
    document.querySelectorAll(".day-btn").forEach((btn, idx) => {
      btn.classList.toggle("active", idx === currentDay);
    });
  }

  // ====== Schedule & Tab ======
  function renderSchedule() {
    document.getElementById("dayTitle").textContent = `${days[currentDay].date} ${days[currentDay].city}`;
  }

  function renderScheduleItems() {
    const container = document.getElementById("schedule");
    container.innerHTML = "";
    const items = data[currentDay][currentCategory];
    items.forEach(place => {
      const div = document.createElement("div");
      div.className = "card";
      div.textContent = place;
      container.appendChild(div);
    });
  }

  // Tab 切換
  document.querySelectorAll(".tab").forEach(tab => {
    tab.addEventListener("click", () => {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      tab.classList.add("active");
      currentCategory = tab.dataset.category;
      renderScheduleItems();
    });
  });

  // ====== 新增項目 ======
  window.addPlace = function () {
    const t = prompt("新增地點");
    if (t) {
      data[currentDay][currentCategory].push(t);
      renderScheduleItems();
    }
  };

  window.addTodo = function () {
    const t = prompt("待辦事項");
    if (t) {
      data[currentDay].todo.push(t);
      renderSimpleList("todoList", data[currentDay].todo);
    }
  };

  window.addLuggage = function () {
    const t = prompt("行李項目");
    if (t) {
      luggage.push(t);
      renderSimpleList("luggageList", luggage);
    }
  };

  window.addShopping = function () {
    const t = prompt("購物項目");
    if (t) {
      shopping.push(t);
      renderSimpleList("shoppingList", shopping);
    }
  };

  function renderTodo() {
    renderSimpleList("todoList", data[currentDay].todo);
  }

  // ====== 初始化 ======
  renderDayButtons();
  renderSchedule();
  renderScheduleItems();
  renderTodo();
</script>

</body>
</html>
